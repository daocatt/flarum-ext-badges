(()=>{var t={n:e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return t.d(a,{a}),a},d:(e,a)=>{for(var r in a)t.o(a,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:a[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{"use strict";t.r(e);const a=flarum.core.compat["common/app"];t.n(a)().initializers.add("gtdxyz/flarum-user-badges",(function(){}));const r=flarum.core.compat.extend,s=flarum.core.compat.Model;var n=t.n(s);const o=flarum.core.compat["models/User"];var i=t.n(o);const d=flarum.core.compat["components/UserPage"];var u=t.n(d);const l=flarum.core.compat["utils/UserControls"];var c=t.n(l);const g=flarum.core.compat["components/LinkButton"];var p=t.n(g);const f=flarum.core.compat["components/Button"];var b=t.n(f);function h(t,e){return h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},h(t,e)}function v(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,h(t,e)}const y=flarum.core.compat["utils/mixin"];var B=t.n(y);const N=flarum.core.compat["components/Modal"];var x=t.n(N);const _=flarum.core.compat["helpers/fullTime"];var z=t.n(_);const C=flarum.core.compat["utils/ItemList"];var w=t.n(C);flarum.core.compat["components/Select"];const U=flarum.core.compat["utils/Stream"];var I=t.n(U),O=function(t){function e(){return t.apply(this,arguments)||this}v(e,t);var a=e.prototype;return a.oninit=function(e){var a=this;t.prototype.oninit.call(this,e),this.selectedBadge=this.attrs.badge?this.attrs.badge.badge():null,this.user=this.attrs.badge?this.attrs.badge.user():this.attrs.user,this.userHasBadge=!1,this.badge=this.attrs.badge?this.attrs.badge:app.store.createRecord("userBadges"),this.description=I()(this.badge.description()),this.categories={},this.uncategorizedBadges=[],this.loading=!1,this.attrs.badge||(this.loading=!0,app.store.find("badges",{include:"category"}).then((function(t){t.forEach((function(t){if(t.category()){var e=t.category();a.categories[e.id()]?a.categories[e.id()].badges.push(t):a.categories[e.id()]={category:e,badges:[t]}}else a.uncategorizedBadges.push(t)})),a.loading=!1,m.redraw()})))},a.className=function(){return"Modal--small BadgeModal"},a.title=function(){return app.translator.trans("gtdxyz-flarum-badges.forum."+(this.badge.exists?"update":"give")+"_badge")},a.content=function(){return m("div",null,m("div",{className:"Modal-body"},m("div",{className:"Form"},this.fields().toArray())),m("div",{className:"Modal-footer"},m(b(),{className:"Button Button--primary",type:"submit",loading:this.loading,disabled:this.userHasBadge},app.translator.trans("core.forum.composer_edit.submit_button"))))},a.fields=function(){var t=this,e=new(w());return e.add("badge",m("div",{className:"BadgeModalListItem"},m("p",null,m("b",null,app.translator.trans("gtdxyz-flarum-badges.forum.badge.badge"))),m("div",{className:"Select"},m("select",{value:this.selectedBadge?this.selectedBadge.id():"empty",disabled:!!this.attrs.badge,onchange:function(e){"empty"!==e.target.value&&(t.selectedBadge=app.store.getById("badges",e.target.value),t.checkUserHasBadge(t.selectedBadge))},className:"Select-input FormControl"},m("option",{value:"empty"},app.translator.trans("gtdxyz-flarum-badges.forum.select_badge")),!this.attrs.badge&&Object.values(this.categories).map((function(t){var e=t.category,a=t.badges;return m("optgroup",{label:e.name()},a.map((function(t){return m("option",{value:t.id()},t.name())})))})),!this.attrs.badge&&this.uncategorizedBadges.length>=1&&m("optgroup",{label:app.translator.trans("gtdxyz-flarum-badges.forum.uncategorized")},this.uncategorizedBadges.map((function(t){return m("option",{value:t.id()},t.name())}))),!!this.attrs.badge&&m("option",{value:this.selectedBadge.id()},this.selectedBadge.name())),m("i",{class:"icon fas fa-caret-down Select-caret"})),this.userHasBadge&&m("p",{className:"UserHasBadge"},app.translator.trans("gtdxyz-flarum-badges.forum.user_has_badge"))),30),e.add("badge_description",m("div",{className:"BadgeModalListItem"},m("p",null,m("b",null,app.translator.trans("gtdxyz-flarum-badges.forum.badge.description"),":")),m("p",null,this.selectedBadge?this.selectedBadge.description():app.translator.trans("gtdxyz-flarum-badges.forum.select_badge"))),30),e.add("description",m("div",{className:"BadgeModalListItem"},m("p",null,m("b",null,app.translator.trans("gtdxyz-flarum-badges.forum.badge.earning_reason"))),m("textarea",{className:"FormControl",placeholder:app.translator.trans("gtdxyz-flarum-badges.forum.badge.earning_reason"),bidi:this.description})),30),e},a.checkUserHasBadge=function(t){var e=!1;this.user.userBadges().map((function(a){a.badge()==t&&(e=!0)})),this.userHasBadge=e,m.redraw()},a.onsubmit=function(t){var e=this;t.preventDefault(),this.loading=!0,this.badge.save({description:this.description(),relationships:this.attrs.badge?{}:{badge:this.selectedBadge,user:this.user}}).then((function(){e.attrs.badge?app.modal.show(M,{badge:e.attrs.badge.badge(),userBadgeData:e.attrs.badge}):e.hide(),m.redraw()}),(function(t){e.loading=!1,e.handleErrors(t)}))},e}(x()),M=function(t){function e(){return t.apply(this,arguments)||this}v(e,t);var a=e.prototype;return a.oninit=function(e){t.prototype.oninit.call(this,e),this.loading=!1},a.className=function(){return"Modal--small"},a.title=function(){return app.translator.trans("gtdxyz-flarum-badges.forum.badge_information")},a.content=function(){var t=this;return m("div",null,m("div",{className:"Modal-body"},this.data().toArray()),m("div",{className:"Modal-footer"},m(p(),{href:app.route("badges.item",{id:this.attrs.badge.id()}),className:"Button",style:{margin:"0 10px"}},app.translator.trans("gtdxyz-flarum-badges.forum.badge.badge_details")),this.attrs.userBadgeData&&app.forum.attribute("canGiveBadge")&&m(b(),{className:"Button Button--primary",onclick:function(){confirm(app.translator.trans("gtdxyz-flarum-badges.forum.moderation.remove_badge_confirm"))&&(t.loading=!0,t.attrs.userBadgeData.delete().then((function(){return t.hide()})))},loading:this.loading},app.translator.trans("gtdxyz-flarum-badges.forum.moderation.remove_badge"))))},a.data=function(){var t=new(w());return t.add("name",m("div",{className:"BadgeModalListItem"},m("p",null,this.attrs.badge.name()))),this.attrs.userBadgeData&&t.add("category",m("div",{className:"BadgeModalListItem"},m("p",null,this.attrs.badge.category()&&this.attrs.badge.category().name(),!this.attrs.badge.category()&&app.translator.trans("gtdxyz-flarum-badges.forum.uncategorized")))),this.attrs.userBadgeData&&t.add("earned_date",m("div",{className:"BadgeModalListItem"},m("p",null,z()(this.attrs.userBadgeData.assignedAt())))),t},e}(x()),k=function(t){function e(){return t.apply(this,arguments)||this}return v(e,t),e.prototype.apiEndpoint=function(){return"/badges"+(this.exists?"/"+this.data.id:"")},e}(B()(n(),{name:n().attribute("name"),icon:n().attribute("icon"),order:n().attribute("order"),image:n().attribute("image"),description:n().attribute("description"),isVisible:n().attribute("isVisible"),createdAt:n().attribute("createdAt"),earnedAmount:n().attribute("earnedAmount"),category:n().hasOne("category"),backgroundColor:n().attribute("backgroundColor"),iconColor:n().attribute("iconColor"),labelColor:n().attribute("labelColor")})),P=function(t){function e(){return t.apply(this,arguments)||this}return v(e,t),e.prototype.apiEndpoint=function(){return"/badge_categories"+(this.exists?"/"+this.data.id:"")},e}(B()(n(),{name:n().attribute("name"),order:n().attribute("order"),description:n().attribute("description"),isEnabled:n().attribute("isEnabled"),createdAt:n().attribute("createdAt"),isTable:n().attribute("isTable"),users:n().hasMany("users"),badges:n().hasMany("badges")})),L=function(t){function e(){return t.apply(this,arguments)||this}return v(e,t),e.prototype.apiEndpoint=function(){return"/user_badges"+(this.exists?"/"+this.data.id:"")},e}(B()(n(),{user:n().hasOne("user"),badge:n().hasOne("badge"),description:n().attribute("description"),isPrimary:n().attribute("isPrimary"),assignedAt:n().attribute("assignedAt"),inUserCard:n().attribute("inUserCard")}));const A=flarum.core.compat["components/LoadingIndicator"];var T=t.n(A);const S=flarum.core.compat["common/Component"];var D=t.n(S);const V=flarum.core.compat["common/components/Tooltip"];var j=t.n(V),E=function(t){function e(){return t.apply(this,arguments)||this}v(e,t);var a=e.prototype;return a.oninit=function(e){t.prototype.oninit.call(this,e),this.tooltip=!1!==this.attrs.tooltip,this.forceVisibility=!0===this.attrs.forceVisibility},a.view=function(){return this.attrs.badge.isVisible()||this.forceVisibility?!1===this.tooltip?this.badge():m(j(),{text:""+(this.attrs.badge.description()?this.attrs.badge.description():"")},this.badge()):null},a.badge=function(){var t=this,e=!this.attrs.badge.isVisible()&&this.forceVisibility;return this.attrs.badge.image()?m("img",{src:this.attrs.badge.image(),className:"UserBadgeImage",onclick:function(){t.attrs.onclick&&t.attrs.onclick()},style:{opacity:e?.5:void 0}}):m("span",{className:"UserBadge UserBadge-"+this.attrs.badge.id(),onclick:function(){t.attrs.onclick&&t.attrs.onclick()},style:{backgroundColor:this.attrs.badge.backgroundColor(),color:this.attrs.badge.labelColor(),borderColor:this.attrs.badge.backgroundColor(),opacity:e?.5:void 0}},m("i",{className:this.attrs.badge.icon(),style:{color:this.attrs.badge.iconColor()}})," ",this.attrs.badge.name())},e}(D());function H(t){var e={},a=[];t.userBadges().map((function(t){if(!t)return null;if(t.badge().category()){var r=t.badge().category();e[r.id()]?e[r.id()].badges.push(t):e[r.id()]={name:r.name(),category:r,badges:[t]}}else a.push(t)}));var r=Object.keys(e).sort((function(t,a){return e[t].category.order()-e[a].category.order()})).map((function(t){return e[t]}));return a.length>=1&&r.push({name:app.translator.trans("gtdxyz-flarum-badges.forum.uncategorized"),category:null,badges:a}),r}var R=function(t){function e(){return t.apply(this,arguments)||this}return v(e,t),e.prototype.view=function(){var t=H(this.attrs.user);return m("div",{className:"UserBadges"},0===t.length&&m("div",{className:"Placeholder"},m("p",null,app.translator.trans("v17development-flarum-badges.forum.user_no_badges"))),t.length>=1&&t.map((function(t){var e=t.name,a=t.category,r=t.badges;return a&&!a.isEnabled()?null:m("div",{className:"UserBadgesCategory"},m("h3",null,e),a&&a.description()&&m("p",null,a.description()),r.sort((function(t,e){return t.badge().order()-e.badge().order()})).map((function(t){return m(E,{badge:t.badge(),onclick:function(){return app.modal.show(M,{badge:t.badge(),userBadgeData:t})}})})))})))},e}(D()),F=function(t){function e(){return t.apply(this,arguments)||this}v(e,t);var a=e.prototype;return a.oninit=function(e){t.prototype.oninit.call(this,e),this.user=null,this.loading=!0,this.loadUser(m.route.param("username"))},a.content=function(){return!this.user||this.loading?m(T(),{size:46}):app.session.user?R.component({user:this.user}):m("div",{className:"Placeholder"},m("p",null,app.translator.trans("gtdxyz-flarum-badges.forum.hidden_badges")))},a.show=function(e){var a=this;t.prototype.show.call(this,e),this.user=e,app.store.find("users",e.id(),{include:"userBadges,userBadges.badge,userBadges.badge.category"}).then((function(){a.loading=!1,m.redraw()}))},e}(u());const G=flarum.core.compat["components/Page"];var q=t.n(G);const J=flarum.core.compat["components/IndexPage"];var K=t.n(J);const Q=flarum.core.compat["common/helpers/listItems"];var W=t.n(Q);const X=flarum.core.compat["components/Link"];var Y=t.n(X),Z=function(t){function e(){return t.apply(this,arguments)||this}return v(e,t),e.prototype.view=function(){if(!this.attrs.badges)return null;var t=this.attrs.badges;return m("table",{width:"100%",className:"BadgeTable"},m("thead",null,m("tr",null,m("th",{scope:"col"},app.translator.trans("gtdxyz-flarum-badges.forum.badge.badges")),m("th",{scope:"col"},app.translator.trans("gtdxyz-flarum-badges.forum.badge.description")))),m("tbody",null,t.map((function(t){return m("tr",null,m("td",null,m(Y(),{href:app.route("badges.item",{id:t.id()})},m(E,{badge:t,tooltip:!1}))),m("td",null,t.description(),m("div",{className:"BadgeTableRewarded"},app.translator.trans("gtdxyz-flarum-badges.forum.badge.earned_count",{count:t.earnedAmount()}))))}))))},e}(D()),$=function(t){function e(){return t.apply(this,arguments)||this}return v(e,t),e.prototype.view=function(){if(!this.attrs.badges)return null;var t=this.attrs.badges;return m("ul",{className:"BadgeCategoryList"},t.map((function(t){return m("li",null,m(Y(),{href:app.route("badges.item",{id:t.id()}),className:"BadgeContainer"},m("div",{className:"BadgeContainerInfo"},m(E,{badge:t,tooltip:!1}),app.forum.attribute("canViewDetailedBadgeUsers")&&m("p",null,app.translator.trans("gtdxyz-flarum-badges.forum.badge.earned_count",{count:t.earnedAmount()})))))})))},e}(D()),tt=function(t){function e(){return t.apply(this,arguments)||this}v(e,t);var a=e.prototype;return a.oninit=function(e){var a=this;t.prototype.oninit.call(this,e),this.bodyClass="App--index",this.loading=!0,app.history.push("badgeOverviewPage"),app.setTitle(app.translator.trans("gtdxyz-flarum-badges.forum.badge.badges")),app.store.find("badge_categories").then((function(){a.loading=!1,m.redraw()}))},a.view=function(){var t=app.store.all("badgeCategories").sort((function(t,e){return t.order()-e.order()}));return m("div",{className:"IndexPage"},K().prototype.hero(),m("div",{className:"container"},m("div",{className:"sideNavContainer"},m("nav",{className:"IndexPage-nav sideNav"},m("ul",null,W()(K().prototype.sidebarItems().toArray()))),m("div",{className:"IndexPage-results sideNavOffset"},m("h2",{className:"BadgeOverviewTitle"},app.translator.trans("gtdxyz-flarum-badges.forum.badge.badges")),this.loading&&m(T(),{size:"large"}),!this.loading&&t.map((function(t){var e=t.badges().sort((function(t,e){return t.order()-e.order()}));return m("div",{className:"BadgeCategory"},m("h3",null,t.name()),t.description()&&m("p",null,t.description()),t.isTable()&&m(Z,{badges:e}),!t.isTable()&&m($,{badges:e}))}))))))},e}(q());const et=flarum.core.compat["helpers/avatar"];var at=t.n(et);const rt=flarum.core.compat["helpers/humanTime"];var st=t.n(rt),nt=function(t){function e(){return t.apply(this,arguments)||this}v(e,t);var a=e.prototype;return a.oninit=function(e){t.prototype.oninit.call(this,e),this.attrs.state.refreshParams({filter:{badge:this.attrs.badgeId},sort:"-assignedAt"})},a.view=function(){var t=this.attrs.state,e=null;return t.isInitialLoading()||t.isLoadingNext()?e=T().component({size:"large"}):t.hasNext()&&(e=b().component({className:"Button",icon:"fas fa-chevron-down",onclick:t.loadNext.bind(t)},app.translator.trans("core.forum.discussion_list.load_more_button"))),t.isInitialLoading()&&t.isEmpty()?m(T(),null):t.isEmpty()?m("div",{className:"BadgeUserList-empty"},app.translator.trans("gtdxyz-flarum-badges.forum.no_received")):m("div",null,m("ul",{className:"BadgeUserList"},t.getPages().map((function(t){return t.items.map((function(t){return m("li",null,m(Y(),{href:app.route("user.badges",{username:t.user().username()}),className:"BadgeUserList-user"},at()(t.user()),m("div",{className:"BadgeUserList-userinfo"},m("h4",null,t.user().displayName()),m("p",null,app.translator.trans("gtdxyz-flarum-badges.forum.badge.received_on",{date:st()(t.assignedAt())})))))}))}))),e&&m("div",{className:"SupportSearchList-loadMore"},e))},e}(D()),ot=function(t){function e(){return t.apply(this,arguments)||this}v(e,t);var a=e.prototype;return a.oninit=function(e){var a=this;t.prototype.oninit.call(this,e),this.bodyClass="App--index";var r=app.store.getById("badges",m.route.param("id"));this.loading=!r,r?(app.history.push("badgeItemPage",r.name()),this.setTitle(r)):app.store.find("badges/"+m.route.param("id")).then((function(t){a.loading=!1,app.history.push("badgeItemPage",t.name()),a.setTitle(t),m.redraw()}))},a.setTitle=function(t){app.setTitle(t.name()+" - "+app.translator.trans("gtdxyz-flarum-badges.forum.badge.badges"))},a.view=function(){var t,e,a,r,s=app.store.getById("badges",m.route.param("id"));return m("div",{className:"IndexPage"},K().prototype.hero(),m("div",{className:"container"},m("div",{className:"sideNavContainer"},m("nav",{className:"IndexPage-nav sideNav"},m("ul",null,W()(K().prototype.sidebarItems().toArray()))),m("div",{className:"IndexPage-results sideNavOffset"},m(p(),{href:app.route("badges"),icon:"fas fa-chevron-left",className:"Button BadgesOverviewButton"},app.translator.trans("gtdxyz-flarum-badges.forum.badge.badges")),this.loading&&m(T(),{size:"large"}),!this.loading&&m("div",{className:"BadgeUserListInfo"},m(E,{badge:s,tooltip:!1}),m("div",{className:"BadgeUserListInfo-meta"},m("h3",null,s.name()),m("p",null,s.description()))),(null==(t=app.session)||null==(e=t.user)?void 0:e.isAdmin())&&s&&app.forum.attribute("canViewDetailedBadgeUsers")&&m("h3",null,app.translator.trans("gtdxyz-flarum-badges.forum.badge.earned_by_count",{count:s.earnedAmount()})),(null==(a=app.session)||null==(r=a.user)?void 0:r.isAdmin())&&!this.loading&&app.forum.attribute("canViewDetailedBadgeUsers")&&m(nt,{state:app.userBadgeListState,badgeId:s.id()})))))},e}(q());function it(){(0,r.extend)(K().prototype,"navItems",(function(t){return t.add("badges",m(p(),{icon:"fas fa-id-badge",href:app.route("badges")},app.translator.trans("gtdxyz-flarum-badges.forum.badge.badges")),15),t}))}function dt(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const ut=flarum.core.compat["common/states/PaginatedListState"];var lt=function(t){function e(e,a){return void 0===a&&(a=1),t.call(this,e,a,18)||this}var a,r;return v(e,t),a=e,(r=[{key:"type",get:function(){return"user_badges"}}])&&dt(a.prototype,r),e}(t.n(ut)());const ct=flarum.core.compat["forum/components/Notification"];var mt=function(t){function e(){return t.apply(this,arguments)||this}v(e,t);var a=e.prototype;return a.icon=function(){return""},a.href=function(){return app.route("user.badges",{username:app.session.user.username()})},a.content=function(){return app.translator.trans("gtdxyz-flarum-badges.forum.notification.title")},a.excerpt=function(){var t=this.attrs.notification.subject();return m("div",null,m("i",{className:"icon "+t.badge().icon()}),t.badge().name())},e}(t.n(ct)());const gt=flarum.core.compat["forum/components/NotificationGrid"];var pt=t.n(gt);const ft=flarum.core.compat["forum/app"];var bt=t.n(ft);const ht=flarum.core.compat["common/extend"],vt=flarum.core.compat["forum/components/UserCard"];var yt=t.n(vt);flarum.core.compat["common/components/Link"];const Bt=flarum.core.compat["components/Switch"];var Nt=t.n(Bt),xt=function(t){function e(){return t.apply(this,arguments)||this}v(e,t);var a=e.prototype;return a.oninit=function(e){t.prototype.oninit.call(this,e),this.loading=!1,this.limit=app.forum.attribute("numberOfBadgesOnUserCard"),this.selectedBadges=this.attrs.user.userBadges().filter((function(t){return t.inUserCard()})).map((function(t){return t.id()}))},a.className=function(){return"Modal--big UserCardBadgesModal"},a.title=function(){return app.translator.trans("gtdxyz-flarum-badges.forum.badges_in_card.title")},a.content=function(){var t=this;return m("div",null,m("div",{className:"Modal-body"},this.data().toArray()),m("div",{className:"Modal-footer"},m(b(),{className:"Button Button--primary",onclick:function(){return t.save()},loading:this.loading},app.translator.trans("gtdxyz-flarum-badges.forum.save_changes"))))},a.data=function(){var t=this,e=new(w()),a=H(this.attrs.user);return e.add("info",m("div",{className:"BadgeModalListItem"},m("p",null,app.translator.trans("gtdxyz-flarum-badges.forum.badges_in_card.description")),m("p",null,app.translator.trans("gtdxyz-flarum-badges.forum.badges_in_card.select_limit",{limit:app.forum.attribute("numberOfBadgesOnUserCard")})))),a.map((function(a){var r=a.name,s=a.category,n=a.badges;e.add("badge_category_"+(s?s.id():"uncategorized"),m("div",{className:"UserCardBadgesModalCategory"},m("div",{className:"UserCardBadgesModalCategory-name"},r),n.sort((function(t,e){return t.badge().order()-e.badge().order()})).map((function(e){var a=t.selectedBadges.length>=t.limit&&-1===t.selectedBadges.indexOf(e.id());return m(j(),{text:a?app.translator.trans("gtdxyz-flarum-badges.forum.badges_in_card.hit_limit",{limit:app.forum.attribute("numberOfBadgesOnUserCard")}):"",position:"bottom"},m("div",{className:"UserCardBadgesModalCategory-badge",onclick:function(){if(!a){var r=t.selectedBadges.indexOf(e.id());r>=0?t.selectedBadges.splice(r,1):t.selectedBadges.push(e.id())}}},m("div",{className:"UserCardBadgesModalCategory-badge-preview"},m(E,{badge:e.badge(),onclick:function(){}}),m("div",{className:"preview-name"},e.badge().attribute("name"))),m("div",{className:"UserCardBadgesModalCategory-badge-switch"},Nt().component({state:t.selectedBadges.indexOf(e.id())>=0,disabled:a}))))}))))})),e},a.save=function(){var t=this;this.loading=!0,this.attrs.user.save({userCardBadges:this.selectedBadges}).then((function(){t.attrs.user.userBadges().map((function(e){e.pushAttributes({inUserCard:t.selectedBadges.indexOf(e.id())>=0})})),t.hide()})).catch((function(){})).then((function(){t.loading=!1,m.redraw()}))},e}(x());const _t=flarum.core.compat["forum/states/DiscussionListState"];var zt=t.n(_t);app.initializers.add("gtdxyz-flarum-badges",(function(t){t.store.models.badges=k,t.store.models.badgeCategories=P,t.store.models.userBadges=L,i().prototype.userBadges=n().hasMany("userBadges"),i().prototype.userPrimaryBadge=n().hasOne("userPrimaryBadge"),t.routes["user.badges"]={path:"/u/:username/badges",component:F},t.routes.badges={path:"/badges",component:tt},t.routes["badges.item"]={path:"/badges/:id",component:ot},it(),t.userBadgeListState=new lt({}),t.notificationComponents.badgeReceived=mt,(0,r.extend)(pt().prototype,"notificationTypes",(function(e){e.add("badgeReceived",{name:"badgeReceived",icon:"fas fa-user-tag",label:t.translator.trans("gtdxyz-flarum-badges.forum.notification.settings")})})),(0,r.extend)(u().prototype,"navItems",(function(e){t.session.user&&e.add("badges",p().component({href:t.route("user.badges",{username:this.user.username()}),name:"badges",icon:"fas fa-user-tag"},[t.translator.trans("gtdxyz-flarum-badges.forum.badge.badges")]),15)})),(0,r.extend)(c(),"moderationControls",(function(e,a){t.forum.attribute("canGiveBadge")&&e.add("test",m(b(),{icon:"fas fa-user-tag",onclick:function(){return t.modal.show(O,{user:a})}},t.translator.trans("gtdxyz-flarum-badges.forum.give_badge")))})),(0,ht.extend)(yt().prototype,"infoItems",(function(t){var e,a=this.attrs.user;if(bt().forum.attribute("showBadgesOnUserCard")&&a.userBadges){var r=null!=(e=a.userBadges())?e:[];if(!(r.length<1)&&r){bt().forum.attribute("numberOfBadgesOnUserCard");var s=r.filter((function(t){return t.inUserCard()}));s.length;var n=s.map((function(t){return m(E,{badge:t.badge(),onclick:function(){return bt().modal.show(M,{badge:t.badge(),userBadgeData:t})}})}));(a===bt().session.user&&bt().forum.attribute("editOwnUserCardBadges")||bt().forum.attribute("editUserCardBadges"))&&n.push(m(j(),{text:bt().translator.trans("gtdxyz-flarum-badges.forum.badges_in_card.manage_badges")},m("a",{href:"#",className:"UserBadge more-badges",onclick:function(t){t.preventDefault(),bt().modal.show(xt,{user:a})}},m("i",{className:"fas fa-pencil-alt BadgeIconOnly"})))),t.add("badges",n)}}})),(0,r.extend)(zt().prototype,"requestParams",(function(t){var e;"string"==typeof t.include?t.include=[t.include]:null==(e=t.include)||e.push("user.userBadges","user.userBadges.badge")}))}))})(),module.exports=e})();
//# sourceMappingURL=forum.js.map